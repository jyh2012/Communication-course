/**********************************************************************************
 *                                                                                *
 *	    	EM-023��Ƭ������ͷ��������---������ҵ��ѧ�繤����ʵ���ѧ����         *
 *                                                                                *
 **********************************************************************************/

 //------------------------------------------------------------------------------//     
 //	        "Init_DeviceA.c"���豸��ʼ�������飬���������е���Init_DeviceA()       // 
 //------------------------------------------------------------------------------//


void Reset_Sources_Init()
{
  WDTCN     = 0xDE;
  WDTCN     = 0xAD;
}


//���濪�����ú�������ɻ�������ѡ��Ͷ˿���Դ�ķ���
void Port_IO_Init()
{
  // P2MDOUT   = 0xFF;
  // P3MDOUT   = 0xFF;
	P1MDOUT=0x00;
	P3MDOUT=0x00;
  XBR0     =0x04; //= 0x0F;																//UART0��TX0,RX0 �����˿�����P0.0,P0.1
																									//SPI0��SCK, MISO, MOSI���ӵ��˿�����P0.2,P0.3,P0.4
																									//SPI0��NSS���ӵ��˿�����P1.0
																									//MSBus��SDA, SCL���ӵ��˿�����P1.1,P1.2
    
	XBR1      = 0x04; //0x1E																//T0,T1 �����˿�����P1.4,P1.6
																									//INT0 �����˿�����P1.5
																									//INT1 �����˿�����P1.7
																									//CEX0 �����˿�����P1.3
    
	XBR2      = 0xC0; //0x40																//��ֹ������	
																									//���濪��ʹ��
																									//ʹ�õͶ�EMI

	  	  
	EMI0CF    = 0x0B;//0x0F																//ѡ��P2-P3��Ϊ���߶˿ڣ����÷�ʽ����ʹ���ⲿRAM 
  EMI0TC    = 0xDF;//DF																//���߷��ʵ�ַ����ʱ��3��SYS����
																									//���߷��ʶ�/д�������8��SYS����
																									//���߷��ʵ�ַ����ʱ��3��SYS����
	P74OUT=0xFF;
}

//������ʼ������,ʹ��Ƭ�⾧������
void Oscillator_Init()
{
  uint i = 0;
  OSCXCN    = 0x67;			  											//ʹ��Ƭ�⾧��г������f>6.7MHz
  for (i = 0; i < 3000; i++);   								//�ȴ�1mS��ɲ���
  while ((OSCXCN & 0x80) == 0); 								//����ⲿ�����Ƿ���Ч
  OSCICN    = 0x08;			  											//ѡ���ⲿ������Ϊϵͳʱ�ӣ���ֹ�ڲ�ʱ��
}									

//�ο���ѹԴ��ʼ������
void Voltage_Reference_Init()
{
  REF0CN    = 0x03;
}

//ADC0��ʼ������
void ADC0_Init()
{
	AMX0CF	= 0x00;
	AMX0SL	= 0x00;
	ADC0CF	= 0x28;
	ADC0CN	= 0x81;
}

//ADC1��ʼ������
void ADC1_Init()
{
	AMX1SL	= 0x07;
	ADC1CF  = 0x19;
  ADC1CN  = 0x80;
}

void DAC_Init()
{
  DAC0CN    = 0x84;
	DAC1CN    = 0x84;

}

//�豸��ʼ�����������������е���Init_DeviceA()
void Init_Device()
{
  Reset_Sources_Init();														//��λԴ��ʼ��
  Port_IO_Init();																	//�˿ڳ�ʼ��
  Oscillator_Init();															//ʱ��Դ��ʼ��
	Voltage_Reference_Init();
	ADC0_Init();
	ADC1_Init();
	DAC_Init();
}
